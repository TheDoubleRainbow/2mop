{"version":3,"sources":["../../api/register.js"],"names":["addFullNameToBody","name","full","body","userApi","create","res","user","UserModel","save","then","_id","findById","send","result","catch","status","error","message"],"mappings":";;;;;;AAAA;;;;AACA;;AACA;;;;AACA;;;;;;AAEA,IAAMA,oBAAoB,SAApBA,iBAAoB;AAAA,QAAQ,eAAM;AACvCC,QAAM;AACLC,SAAS,aAAI,YAAJ,EAAkBC,IAAlB,CAAT,SAAoC,aAAI,WAAJ,EAAiBA,IAAjB;AAD/B;AADiC,EAAN,EAI/BA,IAJ+B,CAAR;AAAA,CAA1B;;AAMA,IAAMC,UAAU,wCAAS;AACxBC,OADwB,wBACPC,GADO,EACF;AAAA,MAAbH,IAAa,QAAbA,IAAa;;AACrB,MAAII,OAAO,IAAIC,cAAJ,CAAcR,kBAAkBG,IAAlB,CAAd,CAAX;;AAEAI,OAAKE,IAAL,GACEC,IADF,CACO;AAAA,OAAGC,GAAH,SAAGA,GAAH;AAAA,UAAaH,eAAUI,QAAV,CAAmBD,GAAnB,EAAwBD,IAAxB,CAA6B;AAAA,WAAUJ,IAAIO,IAAJ,CAASC,MAAT,CAAV;AAAA,IAA7B,CAAb;AAAA,GADP,EAEEC,KAFF,CAEQ;AAAA,UAAST,IAAIU,MAAJ,CAAW,GAAX,EAAgBH,IAAhB,CAAqB,0BAAWI,MAAMC,OAAjB,CAArB,CAAT;AAAA,GAFR;AAGA;AAPuB,CAAT,CAAhB;;kBAUed,O","file":"register.js","sourcesContent":["import resource from 'resource-router-middleware';\nimport { merge, get } from 'lodash/fp';\nimport resMessage from '../lib/res-message';\nimport UserModel from '../models/user';\n\nconst addFullNameToBody = body => merge({\n\tname: {\n\t\tfull: `${get('name.first', body)} ${get('name.last', body)}`\n\t},\n}, body);\n\nconst userApi = resource({\n\tcreate({ body }, res) {\n\t\tlet user = new UserModel(addFullNameToBody(body));\n\n\t\tuser.save()\n\t\t\t.then(({ _id }) => UserModel.findById(_id).then(result => res.send(result)))\n\t\t\t.catch(error => res.status(400).send(resMessage(error.message)))\n\t},\n});\n\nexport default userApi;\n"]}